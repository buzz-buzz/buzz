include ../share/common

doctype html
html(manifest="/buzz.appcache")
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible", content="IE=edge, chrome=1")
    meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0")
    + css("/public/css/player-layout.min.css")
    + css("/public/css/button.min.css")
    + css("/public/css/player.min.css")
    
    + css("/public/css/semantic-ui/semantic.min.css")
    <!-- Only required for desktop -->
    + css("/node_modules/mobile-angular-ui/dist/css/mobile-angular-ui-hover.min.css")

    <!-- Always required -->
    + css("/node_modules/mobile-angular-ui/dist/css/mobile-angular-ui-base.min.css")

    <!-- Only required for desktop -->
    + css("/node_modules/mobile-angular-ui/dist/css/mobile-angular-ui-desktop.min.css")
    title='Buzzbuzz English'
    style.
        body {
            margin: 0;
            padding: 0;
        }

        .app {
            background: white;
        }

        .sidebar-toggle{
            width:100%;
        }

        .navbar-app {
            background-color: #f6b52a;
            color: black;
        }

        a.exercisebutton {
            width: 47%;
            height: 100%;
            display: inline-block;
            margin: 0;
            padding: 0 !important;
            line-height: 2.5em;
            text-align: center;
        }
        .cube, .cube .cube-side {
            width: auto;
            height: auto;
            min-height: 400px;
            padding: 0 !important;
        }

        .pull-left{
            width: 10% !important;
        }

        .pull-left>a{
            width: 100%;
            height: 100%;
            display: inline-block;
        }
    if base
        base(href=base)
    block meta
body(ng-app="mobileModule")
    .sidebar.sidebar-left
    .sidebar.sidebar-right

    .app
        .navbar.navbar-app.navbar-absolute-top
            .navbar-brand.navbar-brand-center
                span=title || 'Buzzbuzz English'
            .btn.sidebar-toggle(style='width:92%;')
                .btn-group.pull-left
                    a(href=backUrl ||'javascript:location.href="/my/today"') <
                block rightTopMenu

        .app-body
            .app-content
                ng-view

    div(ui-yield-to="modals")

    block content

    include ../js
    + js("/node_modules/angular-route/angular-route.min.js")
    + js("/node_modules/mobile-angular-ui/dist/js/mobile-angular-ui.min.js")
    + js('/js/buzzHeaderModule.min.js')
    + js('/js/parserModule.min.js')
    + js('/js/DateModule.min.js')
    + js('/js/quizModule.min.js')
    + js('/js/buzzModule.min.js')
    + js('/js/buzzModule/weeklyQuizCtrl.min.js')
    + js("/js/buzzModule/newWordCtrl.min.js")
    + js("/js/buzzModule/quizCtrl.min.js")
    + js("/js/level-ctrl.min.js")
    + js("/js/formModule.min.js")
    + js("/js/accountModule.min.js")
    + js("/js/educationModule.min.js")
    + js("/node_modules/angular-file-reader-module/dist/angular-file-reader.js")
    script.
        angular.module('mobileModule', [
            'ngRoute',
            'mobile-angular-ui',
            'buzzModule',
            'accountModule'
        ])
            .config(['$routeProvider', '$locationProvider', function ($routeProvider, $locationProvider) {
                $locationProvider.html5Mode(true);

                $routeProvider
                    .when('/weekly-quiz', {
                        templateUrl: 'weekly-quiz.html',
                        controller: 'weeklyQuizCtrl',
                        controllerAs: 'weeklyQuizCtrl'
                    })
                    .when('/bind-mobile', {
                        templateUrl: 'bind-mobile.html'
                    })
                    .when('/daily-exercise', {
                        templateUrl: 'daily-exercise.html',
                        controller: 'quizCtrl',
                        controllerAS: 'quizCtrl'
                    })
                    .when('/today-vocabulary', {
                        templateUrl: 'vocabulary.html',
                        controller: 'newWordCtrl',
                        controllerAS: 'newWordCtrl'
                    })
                    .when('/avatar', {
                        templateUrl: 'avatar.html',
                        controller: 'viewAccountCtrl',
                        controllerAS: 'viewAccountCtrl'
                    })

                $routeProvider.otherwise('/weekly-quiz');
            }])
        ;
    block js