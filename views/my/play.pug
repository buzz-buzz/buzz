extends layout

block js
    script(src="/js/buzzModule.js")
    script(src="/lib/jwplayer/jwplayer.js")
    script.
        jwplayer.key = 'lG24bAGJCRLF1gi4kajg4EnUKi+ujyUyKMoSNA==';
    script.
        angular.module('buzzHeaderModule')
            .controller('LevelCtrl', ['$scope', 'queryParser', '$httpParamSerializer', function ($scope, queryParser, $httpParamSerializer) {
                var query = queryParser.parse();

                $scope.switchToLevelFrom = function (currentLevel) {
                    var to = currentLevel === 'A' ? 'B' : 'A';
                    query.level = to;
                    location.href = '/my/play?' + $httpParamSerializer(query);
                };

                $scope.currentLevel = query.level;
            }])
    script(src="/js/full-page.js")

block head
    style.
        body {
            background: url('http://source.bridgeplus.cn/image/png/skin2.png') repeat 0 0;
            background-size: cover;
        }

        a.toggle {
            background-color: white;
            padding: 5px 15px;
            border-radius: 30px;
            color: black !important;
        }

        a.toggle:hover, a.toggle:active {
            color: black !important;
        }

        .circle {
            background-color: #f6b52a;
            color: white;
            border-radius: 50%;
            padding: 5px;
            font-size: smaller;
        }

block extraMenus
    li#level-switcher(ng-controller="LevelCtrl", ng-cloak)
        a(href="javascript: void(0);", ng-click="switchToLevelFrom(currentLevel)", class="toggle")
            span.icon-menu.circle(ng-if="currentLevel === 'B'", style="margin-left: -8px;")
            span &nbsp;
            span Level
            span &nbsp;
            strong {{currentLevel}}
            span &nbsp;
            span.icon-menu.circle(ng-if="currentLevel === 'A'", style="margin-right: -8px;")

block content
    #full-page.full.height.container(ng-app="buzzModule")
        a.page-pos(name="page-1")
        .page.with-header.section.transparent
            .center.aligned.container.column.flex-box.transparent
                iframe.row.content.white.background(ng-src="{{'player' + queryString}}" ng-controller="VideoPlayerCtrl", style="border:none; width: 100%;", allowfullscreen)
                #page-2-header.center.aligned.container.column.white.background.row.dynamic
                    .tabular.menu
                        .item.middle(ng-class="{'active': $root.tabularIndex===1}",ng-click="$root.tabularIndex=1")
                            span.icon.icon-list2
                            span Today's Vocabulary
                        .item(ng-class="{'active': $root.tabularIndex===2}",ng-click="$root.tabularIndex=2")
                            span.icon.icon-list2
                            span Daily Exercise
                        .item(ng-class="{'active': $root.tabularIndex===3}",ng-click="$root.tabularIndex=2")
                            span.icon.icon-list2
                            span Weekly Quiz
        a.page-pos(name="page-2")
        .page.section.flex-box(ng-controller="page2ParentCtrl")
            .center.aligned.container.column.white.background.row.content
                .tabular.content
                    .item(ng-show="$root.tabularIndex===1",ng-controller="newWordCtrl")
                        .left.arrow(ng-click="turnWord(false)",ng-class="{'hidden':wordIndex===0}")
                            span.icon-circle-left
                        .vocabulary.container
                            iframe(ng-src="{{$sce.trustAsResourceUrl(wordURL)}}",frameborder="0",style="width: 100%;height: 500px")
                        .right.arrow(ng-click="turnWord(true)",ng-class="{'hidden':wordIndex===WORD_MAX_INDEX}")
                            span.icon-circle-right
                        .button(ng-show="isWordMode&&hasWordMode",ng-click="changeWordMode(false)") 进入练习
                        .button(ng-show="!isWordMode&&hasWordMode",ng-click="changeWordMode(true)") 显示词汇
                    .item(ng-show="$root.tabularIndex===2",ng-controller="quizCtrl")
                        .statusbar
                            .status(ng-repeat="quiz in quizzes track by $index" ng-class="{'active': $index===quizIndex, 'pass': quiz.status===STATUS.P,'fail': quiz.status===STATUS.F}") {{$index+1}}
                        .left.arrow(ng-click="turnQuiz(false)",ng-class="{'hidden':quizIndex===0}")
                            span.icon-circle-left
                        .exercise.container
                            iframe(ng-src="{{$sce.trustAsResourceUrl(quizURL)}}",frameborder="0",style="width: 100%;height: 500px")
                        .right.arrow(ng-click="turnQuiz(true)",ng-class="{'hidden':quizIndex===quizzes.length-1}")
                            span.icon-circle-right
                    .item(ng-show="$root.tabularIndex===3") item3
