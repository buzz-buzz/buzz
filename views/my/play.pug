extends layout

block js
    script(src="/js/buzzModule.js")
    script(src="/lib/jwplayer/jwplayer.js")
    script.
        jwplayer.key = 'lG24bAGJCRLF1gi4kajg4EnUKi+ujyUyKMoSNA==';
    script.
        angular.module('buzzHeaderModule')
            .controller('LevelCtrl', ['$scope', 'queryParser', '$httpParamSerializer', function ($scope, queryParser, $httpParamSerializer) {
                var query = queryParser.parse();

                $scope.switchToLevelFrom = function (currentLevel) {
                    var to = currentLevel === 'A' ? 'B' : 'A';
                    query.level = to;
                    location.href = '/my/play?' + $httpParamSerializer(query);
                };

                $scope.currentLevel = query.level;
            }])

block head
    style.
        body {
            background: url('http://source.bridgeplus.cn/image/png/skin2.png') repeat 0 0;
            background-size: cover;
        }

        a.toggle {
            background-color: white;
            padding: 5px 15px;
            border-radius: 30px;
            color: black !important;
        }

        a.toggle:hover, a.toggle:active {
            color: black !important;
        }

        .circle {
            background-color: #f6b52a;
            color: white;
            border-radius: 50%;
            padding: 5px;
            font-size: smaller;
        }

block extraMenus
    li#level-switcher(ng-controller="LevelCtrl", ng-cloak)
        a(href="javascript: void(0);", ng-click="switchToLevelFrom(currentLevel)", class="toggle")
            span.icon-menu.circle(ng-if="currentLevel === 'B'", style="margin-left: -8px;")
            span &nbsp;
            span Level
            span &nbsp;
            strong {{currentLevel}}
            span &nbsp;
            span.icon-menu.circle(ng-if="currentLevel === 'A'", style="margin-right: -8px;")

block content
    #full-page.full.height.container(ng-app="buzzModule")
        a.page-pos(name="page-1")
        .page.with-header.section.transparent
            .center.aligned.container.column.flex-box.transparent
                iframe.row.content.white.background(ng-src="{{'player' + queryString}}" ng-controller="VideoPlayerCtrl", style="border:none;")
        a.page-pos(name="page-2")
        .page.section(ng-controller="page2ParentCtrl")
            .center.aligned.container.column.white.background.flex-box
                .tabular.menu
                    .item.middle(ng-class="{'active': tabularIndex===1}",ng-click="tabularIndex=1")
                        span.icon.icon-list2
                        span Today's Vocabulary
                    .item(ng-class="{'active': tabularIndex===2}",ng-click="tabularIndex=2")
                        span.icon.icon-list2
                        span Daily Exercise
                    .item(ng-class="{'active': tabularIndex===3}",ng-click="tabularIndex=2")
                        span.icon.icon-list2
                        span Weekly Quiz
                .tabular.content.flex-box
                    .item.row.content(ng-show="tabularIndex===1",ng-controller="newWordCtrl")
                        .left.arrow(ng-click="turnWord(false)",ng-class="{'hidden':wordIndex===0}")
                            span.icon-circle-left
                        .vocabulary.container
                            .item.effect2
                                iframe(ng-src="{{$sce.trustAsResourceUrl(wordURL)}}",frameborder="0",style="width: 100%;height: 300px")
                        .right.arrow(ng-click="turnWord(true)",ng-class="{'hidden':wordIndex===WORD_MAX_INDEX}")
                            span.icon-circle-right
                    .item.row.content(ng-show="tabularIndex===2")
                        .exercise.container
                            iframe(ng-src="/exercise/my",frameborder="0",style="width: 100%;height: 500px")
                    .item.row.content(ng-show="tabularIndex===3") item3
